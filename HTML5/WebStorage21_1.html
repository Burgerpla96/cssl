<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebStorage21_1.html</title>
</head>
<body>
    <fieldset>
        <legend>web storage 를 이용한 방문자 회원수 카운팅(로컬 스토리지)</legend>
        <!--session은 tab을 닫으면 데이터가 사라진다.-->
        <span id="display" style='color: red;font-weight: bold;font-size: 1.2em;'></span>
        <button onclick="removeStorage();">local storage삭제</button>
        <!--onclick='' 안에는 자바스크립트-->
    </fieldset>
    <script>
        //브라우저의 웹 스토리지 지원여부 판단
        console.log(typeof(Storage) != undefined);
        var span;
        if(typeof(Storage) != undefined){//웹 스토리지를 제공하는 브라우저
            //span
            span = document.getElementById('display');
            span.innerHTML = 'web storage를 지원하는 브라우저입니다.';
            console.log('자료형: %s, localStorage: %s',typeof localStorage, localStorage);
            //로컬 스토리지에 저장한 방문 횟수 읽기
            var counter = localStorage.getItem('counter');
            console.log('counter: %s',counter)
            if(counter === null){
                //방문 횟수 1로 초기화
                localStorage.setItem('counter',1);
                span.innerHTML = '첫 방문입니다.';
            }
            else{
                //local storage에 키값이 있는 경우
                //방문횟수 증가
                counter++;
                span.innerHTML= counter+'번째 방문입니다.';
                localStorage.setItem('counter',counter);
            }
        }

        function removeStorage(){
            span.innerHTML ='방문 횟수가 초기화되었습니다.';
            localStorage.removeItem('counter');
        }

    </script>
</body>
</html>